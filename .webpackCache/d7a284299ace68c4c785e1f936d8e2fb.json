{"remainingRequest":"C:\\Users\\mrcsm\\Desktop\\base-api-serverless\\node_modules\\ts-loader\\index.js!C:\\Users\\mrcsm\\Desktop\\base-api-serverless\\lib\\i18n.ts","dependencies":[{"path":"C:\\Users\\mrcsm\\Desktop\\base-api-serverless\\lib\\i18n.ts","mtime":1704481060433},{"path":"C:\\Users\\mrcsm\\Desktop\\base-api-serverless\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\mrcsm\\Desktop\\base-api-serverless\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOw0KdmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkgew0KICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7DQogICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykgew0KICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTsNCiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkNCiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdDsNCiAgICB9Ow0KICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KfTsNCnZhciBfX3ZhbHVlcyA9ICh0aGlzICYmIHRoaXMuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsNCiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsNCiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsNCiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gew0KICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOw0KICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9Ow0KICAgICAgICB9DQogICAgfTsNCiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsNCn07DQpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOw0KZXhwb3J0cy5pMThuID0gdm9pZCAwOw0KdmFyIGFkZE1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSwgcmVzcG9uc2UsIGJvZHkpIHsNCiAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIHJlc3BvbnNlKSwgeyBib2R5OiBKU09OLnN0cmluZ2lmeShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYm9keSksIHsgbWVzc2FnZTogbWVzc2FnZSB9KSkgfSk7DQp9Ow0KdmFyIHBhcnNlVGVtcGxhdGVzID0gZnVuY3Rpb24gKG1lc3NhZ2UsIHBhcmFtcykgew0KICAgIHZhciBlXzEsIF9hOw0KICAgIGlmICghcGFyYW1zKSB7DQogICAgICAgIHJldHVybiBtZXNzYWdlOw0KICAgIH0NCiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHBhcmFtcyk7DQogICAgdmFyIHRleHQgPSBtZXNzYWdlOw0KICAgIHRyeSB7DQogICAgICAgIGZvciAodmFyIGtleXNfMSA9IF9fdmFsdWVzKGtleXMpLCBrZXlzXzFfMSA9IGtleXNfMS5uZXh0KCk7ICFrZXlzXzFfMS5kb25lOyBrZXlzXzFfMSA9IGtleXNfMS5uZXh0KCkpIHsNCiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzXzFfMS52YWx1ZTsNCiAgICAgICAgICAgIHZhciBzZWFyY2ggPSAieyIuY29uY2F0KGtleSwgIn0iKTsNCiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UobmV3IFJlZ0V4cChzZWFyY2gsICdnJyksIHBhcmFtc1trZXldKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQ0KICAgIGZpbmFsbHkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgaWYgKGtleXNfMV8xICYmICFrZXlzXzFfMS5kb25lICYmIChfYSA9IGtleXNfMS5yZXR1cm4pKSBfYS5jYWxsKGtleXNfMSk7DQogICAgICAgIH0NCiAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQ0KICAgIH0NCiAgICByZXR1cm4gdGV4dDsNCn07DQp2YXIgcmVzb2x2ZSA9IGZ1bmN0aW9uIChfYSkgew0KICAgIHZhciBsYW5ndWFnZSA9IF9hLmxhbmd1YWdlLCByZXNwb25zZSA9IF9hLnJlc3BvbnNlOw0KICAgIHRyeSB7DQogICAgICAgIHZhciBwYXJzZWRCb2R5ID0gSlNPTi5wYXJzZShyZXNwb25zZSA9PT0gbnVsbCB8fCByZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzcG9uc2UuYm9keSk7DQogICAgICAgIHZhciBtZXNzYWdlID0gcGFyc2VkQm9keS5tZXNzYWdlOw0KICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtZXNzYWdlKSkgew0KICAgICAgICAgICAgaWYgKGxhbmd1YWdlID09PSAnZW4nKSB7DQogICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlc18xID0gbWVzc2FnZS5tYXAoZnVuY3Rpb24gKHBhcnNlKSB7IHJldHVybiBwYXJzZVRlbXBsYXRlcyhwYXJzZSA9PT0gbnVsbCB8fCBwYXJzZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyc2UuZW4sIHBhcnNlLnBhcmFtcyk7IH0pOw0KICAgICAgICAgICAgICAgIHZhciBmaW5hbE1lc3NhZ2VfMSA9IHRlbXBsYXRlc18xLmpvaW4oJywgJyk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGFkZE1lc3NhZ2UoZmluYWxNZXNzYWdlXzEsIHJlc3BvbnNlLCBwYXJzZWRCb2R5KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZXMgPSBtZXNzYWdlLm1hcChmdW5jdGlvbiAocGFyc2UpIHsgcmV0dXJuIHBhcnNlVGVtcGxhdGVzKHBhcnNlID09PSBudWxsIHx8IHBhcnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJzZS5wdEJyLCBwYXJzZS5wYXJhbXMpOyB9KTsNCiAgICAgICAgICAgIHZhciBmaW5hbE1lc3NhZ2UgPSB0ZW1wbGF0ZXMuam9pbignLCAnKTsNCiAgICAgICAgICAgIHJldHVybiBhZGRNZXNzYWdlKGZpbmFsTWVzc2FnZSwgcmVzcG9uc2UsIHBhcnNlZEJvZHkpOw0KICAgICAgICB9DQogICAgICAgIGlmIChsYW5ndWFnZSA9PT0gJ2VuJyAmJiAobWVzc2FnZSA9PT0gbnVsbCB8fCBtZXNzYWdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXNzYWdlLmVuKSkgew0KICAgICAgICAgICAgcmV0dXJuIGFkZE1lc3NhZ2UocGFyc2VUZW1wbGF0ZXMobWVzc2FnZSA9PT0gbnVsbCB8fCBtZXNzYWdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXNzYWdlLmVuLCBtZXNzYWdlLnBhcmFtcyksIHJlc3BvbnNlLCBwYXJzZWRCb2R5KTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobWVzc2FnZSA9PT0gbnVsbCB8fCBtZXNzYWdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXNzYWdlLnB0QnIpIHsNCiAgICAgICAgICAgIHJldHVybiBhZGRNZXNzYWdlKHBhcnNlVGVtcGxhdGVzKG1lc3NhZ2UgPT09IG51bGwgfHwgbWVzc2FnZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWVzc2FnZS5wdEJyLCBtZXNzYWdlLnBhcmFtcyksIHJlc3BvbnNlLCBwYXJzZWRCb2R5KTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gcmVzcG9uc2U7DQogICAgfQ0KICAgIGNhdGNoIChlcnJvcikgew0KICAgICAgICByZXR1cm4gcmVzcG9uc2U7DQogICAgfQ0KfTsNCnZhciBnZXQgPSBmdW5jdGlvbiAoZGVmaW5pdGlvbiwgcGFyYW1zKSB7DQogICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBkZWZpbml0aW9uKSwgeyBwYXJhbXM6IHBhcmFtcyB9KTsNCn07DQp2YXIgdHJhbnNsYXRvciA9IGZ1bmN0aW9uIChkZWZpbml0aW9uLCBsYW5ndWFnZSwgcGFyYW1zKSB7DQogICAgaWYgKGxhbmd1YWdlID09PSB2b2lkIDApIHsgbGFuZ3VhZ2UgPSAncHRCcic7IH0NCiAgICB2YXIgbGFuZ3VhZ2VTZWxlY3RlZCA9IGRlZmluaXRpb25bbGFuZ3VhZ2VdID8gbGFuZ3VhZ2UgOiAncHRCcic7DQogICAgcmV0dXJuIHBhcnNlVGVtcGxhdGVzKGRlZmluaXRpb25bbGFuZ3VhZ2VTZWxlY3RlZF0sIChwYXJhbXMgfHwge30pKTsNCn07DQp2YXIgaTE4biA9IHsNCiAgICByZXNvbHZlOiByZXNvbHZlLA0KICAgIGdldDogZ2V0LA0KICAgIHRyYW5zbGF0b3I6IHRyYW5zbGF0b3IsDQogICAgcGFyc2VUZW1wbGF0ZXM6IHBhcnNlVGVtcGxhdGVzDQp9Ow0KZXhwb3J0cy5pMThuID0gaTE4bjsNCg=="},{"version":3,"file":"C:\\Users\\mrcsm\\Desktop\\base-api-serverless\\lib\\i18n.ts","sourceRoot":"","sources":["C:\\Users\\mrcsm\\Desktop\\base-api-serverless\\lib\\i18n.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nconst addMessage = (message, response, body) => {\r\n  return {\r\n    ...response,\r\n    body: JSON.stringify({\r\n      ...body,\r\n      message\r\n    })\r\n  }\r\n}\r\n\r\nconst parseTemplates = (message: string, params) => {\r\n  if (!params) {\r\n    return message\r\n  }\r\n\r\n  const keys = Object.keys(params)\r\n\r\n  let text = message\r\n\r\n  for (const key of keys) {\r\n    const search = `{${key}}`\r\n    text = text.replace(new RegExp(search, 'g'), params[key])\r\n  }\r\n  return text\r\n}\r\n\r\nconst resolve = ({ language, response }) => {\r\n  try {\r\n    const parsedBody = JSON.parse(response?.body)\r\n    const { message } = parsedBody\r\n\r\n    if (Array.isArray(message)) {\r\n      if (language === 'en') {\r\n        const templates = message.map(parse => parseTemplates(parse?.en, parse.params))\r\n\r\n        const finalMessage = templates.join(', ')\r\n\r\n        return addMessage(\r\n          finalMessage,\r\n          response,\r\n          parsedBody\r\n        )\r\n      }\r\n\r\n      const templates = message.map(parse => parseTemplates(parse?.ptBr, parse.params))\r\n\r\n      const finalMessage = templates.join(', ')\r\n\r\n      return addMessage(\r\n        finalMessage,\r\n        response,\r\n        parsedBody\r\n      )\r\n    }\r\n\r\n    if (language === 'en' && message?.en) {\r\n      return addMessage(\r\n        parseTemplates(message?.en, message.params),\r\n        response,\r\n        parsedBody\r\n      )\r\n    }\r\n\r\n    if (message?.ptBr) {\r\n      return addMessage(\r\n        parseTemplates(message?.ptBr, message.params),\r\n        response,\r\n        parsedBody\r\n      )\r\n    }\r\n\r\n    return response\r\n  } catch (error) {\r\n    return response\r\n  }\r\n}\r\n\r\nconst get = (definition, params?) => {\r\n  return {\r\n    ...definition,\r\n    params\r\n  }\r\n}\r\n\r\nconst translator = (definition, language: string = 'ptBr', params?) => {\r\n  const languageSelected = definition[language] ? language : 'ptBr'\r\n  return parseTemplates(definition[languageSelected], (params || {}))\r\n}\r\n\r\nconst i18n = {\r\n  resolve,\r\n  get,\r\n  translator,\r\n  parseTemplates\r\n}\r\n\r\nexport {\r\n  i18n\r\n}\r\n"]}]}