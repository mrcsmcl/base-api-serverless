{"remainingRequest":"C:\\Users\\mrcsm\\Desktop\\base-api-serverless\\node_modules\\ts-loader\\index.js!C:\\Users\\mrcsm\\Desktop\\base-api-serverless\\lib\\jwt.ts","dependencies":[{"path":"C:\\Users\\mrcsm\\Desktop\\base-api-serverless\\lib\\jwt.ts","mtime":1704481060435},{"path":"C:\\Users\\mrcsm\\Desktop\\base-api-serverless\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\mrcsm\\Desktop\\base-api-serverless\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOw0KdmFyIF9fcmVhZCA9ICh0aGlzICYmIHRoaXMuX19yZWFkKSB8fCBmdW5jdGlvbiAobywgbikgew0KICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07DQogICAgaWYgKCFtKSByZXR1cm4gbzsNCiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTsNCiAgICB0cnkgew0KICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTsNCiAgICB9DQogICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9DQogICAgZmluYWxseSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVsicmV0dXJuIl0pKSBtLmNhbGwoaSk7DQogICAgICAgIH0NCiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9DQogICAgfQ0KICAgIHJldHVybiBhcjsNCn07DQpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOw0KZXhwb3J0cy5qd3QgPSB2b2lkIDA7DQp2YXIgY29uZmlnXzEgPSByZXF1aXJlKCJAL2NvbmZpZyIpOw0KdmFyIGpzb253ZWJ0b2tlbl8xID0gcmVxdWlyZSgianNvbndlYnRva2VuIik7DQp2YXIgY3JlYXRlID0gZnVuY3Rpb24gKGRhdGEsIG9wdGlvbnMpIHsNCiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfQ0KICAgIHJldHVybiAoMCwganNvbndlYnRva2VuXzEuc2lnbikoZGF0YSwgY29uZmlnXzEuY29uZmlnLkpXVF9TRUNSRVQsIG9wdGlvbnMpOw0KfTsNCnZhciB2ZXJpZnkgPSBmdW5jdGlvbiAodG9rZW4pIHsNCiAgICB0cnkgew0KICAgICAgICB2YXIgcGF5bG9hZCA9ICgwLCBqc29ud2VidG9rZW5fMS52ZXJpZnkpKHRva2VuLCBjb25maWdfMS5jb25maWcuSldUX1NFQ1JFVCk7DQogICAgICAgIHJldHVybiBwYXlsb2FkOw0KICAgIH0NCiAgICBjYXRjaCAoZSkgew0KICAgICAgICByZXR1cm4gbnVsbDsNCiAgICB9DQp9Ow0KdmFyIGdldERhdGEgPSBmdW5jdGlvbiAodG9rZW4pIHsNCiAgICB0cnkgew0KICAgICAgICB2YXIgX2EgPSBfX3JlYWQodG9rZW4uc3BsaXQoJy4nKSwgMiksIGRhdGEgPSBfYVsxXTsNCiAgICAgICAgdmFyIHJhd0RhdGEgPSBCdWZmZXIuZnJvbShkYXRhLCAnYmFzZTY0JykudG9TdHJpbmcoKTsNCiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UocmF3RGF0YSk7DQogICAgfQ0KICAgIGNhdGNoIChlKSB7DQogICAgICAgIHJldHVybiBudWxsOw0KICAgIH0NCn07DQp2YXIgand0ID0gew0KICAgIGNyZWF0ZTogY3JlYXRlLA0KICAgIHZlcmlmeTogdmVyaWZ5LA0KICAgIGdldERhdGE6IGdldERhdGENCn07DQpleHBvcnRzLmp3dCA9IGp3dDsNCg=="},{"version":3,"file":"C:\\Users\\mrcsm\\Desktop\\base-api-serverless\\lib\\jwt.ts","sourceRoot":"","sources":["C:\\Users\\mrcsm\\Desktop\\base-api-serverless\\lib\\jwt.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,mCAAiC;AACjC,6CAAwD;AAExD,IAAM,MAAM,GAAG,UAAC,IAAI,EAAE,OAAY;IAAZ,wBAAA,EAAA,YAAY;IAChC,OAAA,IAAA,mBAAI,EAAC,IAAI,EAAE,eAAM,CAAC,UAAU,EAAE,OAAO,CAAC;AAAtC,CAAsC,CAAA;AAExC,IAAM,MAAM,GAAG,UAAA,KAAK;IAClB,IAAI;QACF,IAAM,OAAO,GAAG,IAAA,qBAAS,EAAC,KAAK,EAAE,eAAM,CAAC,UAAU,CAAC,CAAA;QACnD,OAAO,OAAO,CAAA;KACf;IAAC,OAAO,CAAC,EAAE;QACV,OAAO,IAAI,CAAA;KACZ;AACH,CAAC,CAAA;AAED,IAAM,OAAO,GAAG,UAAC,KAAa;IAC5B,IAAI;QACI,IAAA,KAAA,OAAU,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,IAAA,EAAxB,IAAI,QAAoB,CAAA;QAChC,IAAM,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,QAAQ,EAAE,CAAA;QACtD,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;KAC3B;IAAC,OAAO,CAAC,EAAE;QACV,OAAO,IAAI,CAAA;KACZ;AACH,CAAC,CAAA;AAED,IAAM,GAAG,GAAG;IACV,MAAM,QAAA;IACN,MAAM,QAAA;IACN,OAAO,SAAA;CACR,CAAA;AAGC,kBAAG","sourcesContent":["import { config } from '@/config'\r\nimport { sign, verify as verifyJwt } from 'jsonwebtoken'\r\n\r\nconst create = (data, options = {}) =>\r\n  sign(data, config.JWT_SECRET, options)\r\n\r\nconst verify = token => {\r\n  try {\r\n    const payload = verifyJwt(token, config.JWT_SECRET)\r\n    return payload\r\n  } catch (e) {\r\n    return null\r\n  }\r\n}\r\n\r\nconst getData = (token: string) => {\r\n  try {\r\n    const [,data] = token.split('.')\r\n    const rawData = Buffer.from(data, 'base64').toString()\r\n    return JSON.parse(rawData)\r\n  } catch (e) {\r\n    return null\r\n  }\r\n}\r\n\r\nconst jwt = {\r\n  create,\r\n  verify,\r\n  getData\r\n}\r\n\r\nexport {\r\n  jwt\r\n}\r\n"]}]}